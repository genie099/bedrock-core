# Bedrock Web

## Frameworks Used

- [Babel](https://babeljs.io/)
- [React Semantic UI](http://react.semantic-ui.com/)
- [Webpack](http://webpack.github.io/)
- [ES6](https://babeljs.io/docs/learn-es2015/)
- [React](https://facebook.github.io/react/)
- [React Router V4](https://github.com/reactjs/react-router)
- [MobX](https://mobx.js.org/)
- [Prettier](https://prettier.io/)
- [Eslint](https://eslint.org/)
- [Lodash](https://lodash.com/)

## Other Features

- Seemless pushState routing using React Router V4
- Full login/signup flow with separate dashboard and homepage router
- All CSS and assets served via Webpack/StyleLoader
- Uses Semantic UI as a rich UI element base
- Uses ES6 style React components
- Code hotswapping
- Static server

## Directory Structure

- `package.json` - Configure dependencies
- `webpack.config.js` - Bundling and build configuration
- `env.conf` - Enviroment variables
- `serve-static` - Static server
- `serve` - Static server for development
- `dist/*` - Files generated by webpack, incuding index.html. These are the assets that should be HTTP served
- `src/utils` - Home of specific JS helper utilities like for example `request.js` for doing API requests
- `src/components` - Home of reuseable components
- `src/index` - Main entrypoint into App UI

## Install Dependencies

Run in the project root folder:

```bash
yarn install
```

Ensure environment is the same using Notion:

```
curl -sSLf https://get.volta.sh | bash
```

## Configuration

All configuration is done using environment variables. The default values in `env.conf` can be overwritten using environment variables.

All config vars are available in the `serve.js` and `serve-static.js` server-side code. In the browser-side all variables are available as a global object `window.__env_conf`.

## Run

The following command serves all HTML/JS/CSS and watches all changes to `src/*.js`

```bash
yarn start
```

UI is running at [http://localhost:2200/](http://localhost:2200/)

## Theming

The default theme that semantic ui providers, can be modify via [src/theme/site/globals/site.variables](site.variables).
Add the below variable to change the primary color

```
@primaryColor: #002f4e;
```

Note that a change will require webpack to rebundle and you will still need to reload the browser (but you dont need to restart webpack).

More variables can found by exploring [https://github.com/Semantic-Org/Semantic-UI/tree/master/src/themes/default/modules](https://github.com/Semantic-Org/Semantic-UI/tree/master/src/themes/default/modules).

If you need a variable exposed to [https://www.styled-components.com/docs/advanced#theming](styled-components)
you can run `yarn theme:variables`, which will update [src/theme/theme.generated.json](theme/theme.generated.json)
The `theme.generated.json` is in [src/index.js](src/index.js) loaded into a global `<ThemeProvider />` thereby exposing it to styled-components.

## Lodash

When using Lodash always used named imports. This will allow tree-shaking to remove unneeded modules.

```js
import { omit } from 'lodash';
```

## API Documentation Portal

All API documentation is powered by Markdown. The API documentation can be curated in `src/docs`. The menu and order of the guides can be configured in `src/screens/Docs/index.js`.

Markdown has some extentions that allow you to pull in information via OpenAPI:

- `callHeading` - A method for showing a `method` + `path` summary of the API call
- `callParams` - A summary of the request body/query parameters
- `callResponse` - A summary of the response body
- `callExamples` - A list of examples on how to use the API call
- `callSummary` - All of the above
- `objectSummary` - Show attributes for a given rich object of `name`

E.g:

```javascript
callParams({ method: 'POST', path: '/1/auth/login' });
```
